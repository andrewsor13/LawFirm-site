{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreisorin/Desktop/ProjectsInProgress/LawFirm-site/src/lib/prisma.tsx"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log:\n      process.env.NODE_ENV === \"development\"\n        ? [\"query\", \"error\", \"warn\"]\n        : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") {\n  globalForPrisma.prisma = prisma;\n}\n\nprocess.on(\"beforeExit\", async () => {\n  await prisma.$disconnect();\n});\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6HAAA,CAAA,eAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO;AAElC;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B;AAEA,QAAQ,EAAE,CAAC,cAAc;IACvB,MAAM,OAAO,WAAW;AAC1B","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreisorin/Desktop/ProjectsInProgress/LawFirm-site/src/app/api/comments/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\nimport { Prisma } from \"@prisma/client\";\nimport { NextRequest, NextResponse } from \"next/server\";\n\nexport async function GET(req: NextRequest) {\n  const postId = req.nextUrl.searchParams.get(\"postId\");\n  const isAccepted = req.nextUrl.searchParams.get(\"isAccepted\");\n\n  try {\n    const whereClause: Prisma.commentsWhereInput = {\n      parentId: null,\n    };\n\n    if (postId) {\n      whereClause.postId = parseInt(postId);\n    }\n\n    if (isAccepted != null) {\n      whereClause.isAccepted = isAccepted === \"true\";\n    }\n\n    const comments = await prisma.comments.findMany({\n      where: whereClause,\n      include: {\n        replies: { orderBy: { createdAt: \"asc\" } },\n      },\n      orderBy: { createdAt: \"desc\" },\n    });\n\n    return NextResponse.json(comments);\n  } catch (error: unknown) {\n    if (error instanceof Error) {\n      console.error(error);\n      return NextResponse.json({ error: error.message }, { status: 500 });\n    }\n\n    console.error(\"Unknown error\", error);\n    return NextResponse.json(\n      { error: \"Something went wrong\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: Request) {\n  const body = await req.json();\n  const { name, content, postId, parentId, isAccepted } = body;\n\n  if (!name || !content || !postId) {\n    return NextResponse.json({ error: \"Missing fields\" }, { status: 400 });\n  }\n\n  try {\n    const newComment = await prisma.comments.create({\n      data: {\n        name,\n        content,\n        postId: parseInt(postId),\n        isAccepted: isAccepted,\n        parentId: parentId ? parseInt(parentId) : null,\n      },\n    });\n    return NextResponse.json(newComment, { status: 201 });\n  } catch (error: unknown) {\n    if (error instanceof Error) {\n      console.error(error);\n      return NextResponse.json({ error: error.message }, { status: 500 });\n    }\n\n    console.error(\"Unknown error\", error);\n    return NextResponse.json(\n      { error: \"Something went wrong\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,SAAS,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAC5C,MAAM,aAAa,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAEhD,IAAI;QACF,MAAM,cAAyC;YAC7C,UAAU;QACZ;QAEA,IAAI,QAAQ;YACV,YAAY,MAAM,GAAG,SAAS;QAChC;QAEA,IAAI,cAAc,MAAM;YACtB,YAAY,UAAU,GAAG,eAAe;QAC1C;QAEA,MAAM,WAAW,MAAM,uHAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC9C,OAAO;YACP,SAAS;gBACP,SAAS;oBAAE,SAAS;wBAAE,WAAW;oBAAM;gBAAE;YAC3C;YACA,SAAS;gBAAE,WAAW;YAAO;QAC/B;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAgB;QACvB,IAAI,iBAAiB,OAAO;YAC1B,QAAQ,KAAK,CAAC;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IAExD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ;QAChC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,IAAI;QACF,MAAM,aAAa,MAAM,uHAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC9C,MAAM;gBACJ;gBACA;gBACA,QAAQ,SAAS;gBACjB,YAAY;gBACZ,UAAU,WAAW,SAAS,YAAY;YAC5C;QACF;QACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,YAAY;YAAE,QAAQ;QAAI;IACrD,EAAE,OAAO,OAAgB;QACvB,IAAI,iBAAiB,OAAO;YAC1B,QAAQ,KAAK,CAAC;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}