{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreisorin/Desktop/ProjectsInProgress/LawFirm-site/src/context/AppContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport type {\n  Domain,\n  SiteSettingsType,\n  ContactData,\n  Posts,\n  SessionUser,\n} from \"@/lib/types\";\n\ntype DomainSummary = Pick<\n  Domain,\n  | \"id\"\n  | \"title\"\n  | \"slug\"\n  | \"icon\"\n  | \"description\"\n  | \"blogOnlyDescription\"\n  | \"createdAt\"\n  | \"updatedAt\"\n>;\n\ntype PostSummary = Pick<\n  Posts,\n  \"id\" | \"title\" | \"slug\" | \"createdAt\" | \"imageUrl\"\n>;\n\ninterface AppContextType {\n  siteSettings: SiteSettingsType | null;\n  contact: ContactData | null;\n  domains: DomainSummary[];\n  posts: PostSummary[];\n  session: SessionUser | null;\n\n  selectedDomain: Domain | null;\n  setSelectedDomain: (slugOrDomain: string | Domain) => Promise<void>;\n\n  refreshSiteSettings: () => Promise<void>;\n  refreshContact: () => Promise<void>;\n  refreshDomains: () => Promise<void>;\n  refreshPosts: () => Promise<void>;\n}\n\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport function AppProvider({ children }: { children: React.ReactNode }) {\n  const [siteSettings, setSiteSettings] = useState<SiteSettingsType | null>(\n    null\n  );\n  const [contact, setContact] = useState<ContactData | null>(null);\n  const [domains, setDomains] = useState<DomainSummary[]>([]);\n  const [posts, setPosts] = useState<PostSummary[]>([]);\n  const [session, setSession] = useState<SessionUser | null>(null);\n  const [selectedDomain, setSelectedDomainState] = useState<Domain | null>(\n    null\n  );\n\n  useEffect(() => {\n    async function loadHomepageData() {\n      try {\n        const [settingsRes, contactRes, domainsRes, postsRes, sessionRes] =\n          await Promise.allSettled([\n            fetch(\"/api/settings\"),\n            fetch(\"/api/contact\"),\n            fetch(\"/api/domains?fields=basic\"),\n            fetch(\"/api/posts?fields=basic\"),\n            fetch(\"/api/auth/session\"),\n          ]);\n\n        if (settingsRes.status === \"fulfilled\" && settingsRes.value.ok)\n          setSiteSettings(await settingsRes.value.json());\n\n        if (contactRes.status === \"fulfilled\" && contactRes.value.ok)\n          setContact(await contactRes.value.json());\n\n        if (domainsRes.status === \"fulfilled\" && domainsRes.value.ok)\n          setDomains(await domainsRes.value.json());\n\n        if (postsRes.status === \"fulfilled\" && postsRes.value.ok)\n          setPosts(await postsRes.value.json());\n\n        if (sessionRes.status === \"fulfilled\" && sessionRes.value.ok)\n          setSession(await sessionRes.value.json());\n      } catch (err) {\n        console.error(\"❌ Failed to load homepage data:\", err);\n      }\n    }\n\n    loadHomepageData();\n  }, []);\n\n  const setSelectedDomain = async (slugOrDomain: string | Domain) => {\n    try {\n      if (typeof slugOrDomain !== \"string\") {\n        setSelectedDomainState(slugOrDomain);\n        return;\n      }\n\n      const cached = domains.find((d) => d.slug === slugOrDomain);\n      if (cached && selectedDomain?.slug !== cached.slug) {\n        const res = await fetch(`/api/domains/domain/${slugOrDomain}`);\n        if (res.ok) {\n          const data: Domain = await res.json();\n          setSelectedDomainState(data);\n        } else {\n          console.warn(\"Domain not found:\", slugOrDomain);\n        }\n      } else if (!cached) {\n        const res = await fetch(`/api/domains/domain/${slugOrDomain}`);\n        if (res.ok) setSelectedDomainState(await res.json());\n      }\n    } catch (err) {\n      console.error(\"Error fetching domain:\", err);\n    }\n  };\n\n  const refreshSiteSettings = async () => {\n    const res = await fetch(\"/api/settings\");\n    if (res.ok) setSiteSettings(await res.json());\n  };\n\n  const refreshContact = async () => {\n    const res = await fetch(\"/api/contact\");\n    if (res.ok) setContact(await res.json());\n  };\n\n  const refreshDomains = async () => {\n    const res = await fetch(\"/api/domains?fields=basic\");\n    if (res.ok) setDomains(await res.json());\n  };\n\n  const refreshPosts = async () => {\n    const res = await fetch(\"/api/posts?fields=basic\");\n    if (res.ok) setPosts(await res.json());\n  };\n\n  return (\n    <AppContext.Provider\n      value={{\n        siteSettings,\n        contact,\n        domains,\n        posts,\n        session,\n        selectedDomain,\n        setSelectedDomain,\n        refreshSiteSettings,\n        refreshContact,\n        refreshDomains,\n        refreshPosts,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  );\n}\n\nexport function useAppContext() {\n  const ctx = useContext(AppContext);\n  if (!ctx)\n    throw new Error(\n      \"useAppContext trebuie folosit doar în interiorul <AppProvider />\"\n    );\n  return ctx;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreisorin/Desktop/ProjectsInProgress/LawFirm-site/src/components/CustomSessionContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport { createContext, useContext } from \"react\";\n\ntype SessionContextType = {\n  session: ReturnType<typeof useSession>[\"data\"];\n  status: ReturnType<typeof useSession>[\"status\"];\n  update: ReturnType<typeof useSession>[\"update\"];\n};\n\nconst CustomSessionContext = createContext<SessionContextType | undefined>(\n  undefined\n);\n\nexport function CustomSessionContextProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const { data: session, status, update } = useSession();\n\n  return (\n    <CustomSessionContext.Provider value={{ session, status, update }}>\n      {children}\n    </CustomSessionContext.Provider>\n  );\n}\n\nexport const useCustomSession = () => {\n  const context = useContext(CustomSessionContext);\n  if (!context)\n    throw new Error(\n      \"useCustomSession must be used within CustomSessionContextProvider\"\n    );\n  return context;\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,qCAAuB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EACvC;AAGK,SAAS,6BAA6B,EAC3C,QAAQ,EAGT;IACC,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,8IAAA,CAAA,aAAU,AAAD;IAEnD,qBACE,8OAAC,qBAAqB,QAAQ;QAAC,OAAO;YAAE;YAAS;YAAQ;QAAO;kBAC7D;;;;;;AAGP;AAEO,MAAM,mBAAmB;IAC9B,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SACH,MAAM,IAAI,MACR;IAEJ,OAAO;AACT","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreisorin/Desktop/ProjectsInProgress/LawFirm-site/src/providers/RootProviders.tsx"],"sourcesContent":["\"use client\";\n\nimport { SessionProvider } from \"next-auth/react\";\nimport { AppProvider } from \"@/context/AppContext\";\nimport { CustomSessionContextProvider } from \"@/components/CustomSessionContext\";\n\nexport function RootProviders({ children }: { children: React.ReactNode }) {\n  return (\n    <SessionProvider>\n      <CustomSessionContextProvider>\n        <AppProvider>{children}</AppProvider>\n      </CustomSessionContextProvider>\n    </SessionProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBACE,8OAAC,8IAAA,CAAA,kBAAe;kBACd,cAAA,8OAAC,0IAAA,CAAA,+BAA4B;sBAC3B,cAAA,8OAAC,6HAAA,CAAA,cAAW;0BAAE;;;;;;;;;;;;;;;;AAItB","debugId":null}}]
}